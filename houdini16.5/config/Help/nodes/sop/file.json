{"body": [{"indent": 0, "text": ["File"], "type": "title", "level": 0}, {"indent": 0, "type": "summary", "text": ["Reads, writes, or caches geometry on disk."]}, {"body": [{"indent": 0, "type": "para", "text": ["This node has two modes of operation. ", {"text": ["If its input is connected"], "type": "em"}, ", you can choose a ", {"text": ["File mode"], "type": "ui"}, " to control how the node reads, writes, or caches geometry on disk. If no input is connected, you can specify a geometry file to read in from disk and send through the node\u2019s output."]}, {"indent": 0, "type": "para", "text": ["It also supports reading, but not writing, of .sim and .simdata files\ncreated from File and File Data DOPs."]}], "indent": 0, "level": 2, "text": ["Overview"], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "text": ["To set up a procedural workflow where the geometry\n    output of a surface node network is always written to disk as part of a render dependency network, set up a\n    ", {"text": ["Geometry render driver"], "fullpath": "/nodes/out/geometry", "scheme": "Node", "type": "link", "value": "/nodes/out/geometry"}, "."]}], "indent": 0, "blevel": 2, "type": "bullet", "text": ["You can also write out the geometry from ", {"text": ["any surface node"], "type": "em"}, " as a one-shot action by right-clicking the node and choosing ", {"text": ["Save Geometry"], "type": "ui"}, "."]}, {"indent": 0, "blevel": 2, "type": "bullet", "text": ["You can \"import\" the loaded geometry into the ", {"text": [".hip"], "type": "code"}, " file so it works without the external file by ", {"text": ["locking the File node"], "fullpath": "/model/lock_nodes", "scheme": null, "type": "link", "value": "/model/lock_nodes"}, "."]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Tips"], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "text": ["How this node reads/writes the geometry to/from the disk file."]}, {"indent": 4, "type": "para", "text": ["This parameter is only available when the node\u2019s input is\n    connected."]}, {"body": [{"body": [{"indent": 8, "type": "para", "text": ["Writes the file if it doesn\u2019t exist, reads it if it does\n        exist."]}, {"indent": 8, "type": "para", "text": ["This is useful for caching, where the node will\n        write the cache to disk the first time it cooks, and\n        use the cache file from then on."]}, {"indent": 8, "type": "para", "text": ["To force a refresh of the cache, manually delete the file\n        on disk."]}], "indent": 4, "type": "dt", "text": ["Automatic"]}, {"body": [{"indent": 8, "type": "para", "text": ["Reads the geometry from the file. If the node\u2019s input\n        is connected, it\u2019s ignored."]}], "indent": 4, "type": "dt", "text": ["Read Files"]}, {"body": [{"indent": 8, "type": "para", "text": ["Writes the input geometry to disk."]}], "indent": 4, "type": "dt", "text": ["Write Files"]}, {"body": [{"indent": 8, "type": "para", "text": ["No file access will occur. Pass through the input geometry\n        to the output, like a ", {"text": ["Null surface node"], "fullpath": "/nodes/sop/null", "scheme": "Node", "type": "link", "value": "/nodes/sop/null"}, "."]}], "indent": 4, "type": "dt", "text": ["No Operation"]}], "container": true, "type": "dt_group"}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["File Mode"]}, {"body": [{"indent": 4, "type": "para", "text": ["The name of the file to read or write."]}], "indent": 0, "text": ["Geometry File"], "role": "item", "attrs": {"id": "file"}, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "text": ["Force a reload of the file.  This will also clear any cached data for\n    packed disk primitives (see also the ", {"text": ["geocache"], "value": "/commands/geocache", "fallback_text": "geocache", "fullpath": "/commands/geocache", "scheme": "Cmd", "type": "link"}, " command)."]}], "indent": 0, "text": ["Reload Geometry"], "role": "item", "attrs": {"id": "reload"}, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "text": ["When loading .sim files this determines which objects should\n    be loaded from disk.  Any objects matching this pattern will\n    be loaded."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Object Mask"]}, {"body": [{"indent": 4, "type": "para", "text": ["For each object loaded from a .sim file, any data attached to\n    the object that matches this path will be loaded.  Patterns\n    like ", {"text": ["*"], "type": "code"}, " can be used to match multiple data.  If blank, only the\n    Geometry data will be loaded."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Geometry Data Path"]}, {"body": [{"indent": 4, "type": "para", "text": ["What should be done if the specified file does not exist on disk.\n    This is only used if in Read Files mode.  By default, if no file\n    of the given name exists, the SOP will error.  This can be\n    troublesome in a network that can recover from the error.  In\n    these cases the behavior can be set to No Geometry so only a\n    warning is posted."]}, {"indent": 4, "type": "para", "text": ["Note that in No Geometry mode, if an input exists to the File SOP,\n    it will be passed through.  This allows the File SOP to become a\n    read-only cache."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Missing Frame"]}, {"body": [{"indent": 4, "type": "para", "text": ["Some file formats, in particular ", {"text": [".bgeo"], "type": "code"}, ", ", {"text": [".bgeo.sc"], "type": "code"}, ", and ", {"text": [".geo"], "type": "code"}, ", contain meta-data in the header than can be loaded without loading the entire file. This is useful for dealing with large data sets."]}, {"body": [{"body": [{"indent": 8, "type": "para", "text": ["Loads the whole file. Potentially with some parts delayed (see below)"]}], "indent": 4, "type": "dt", "text": ["All Geometry"]}, {"body": [{"indent": 8, "type": "para", "text": ["Creates one point if the file loads successfully and attach attributes for each named component of the meta-data."]}], "indent": 4, "type": "dt", "text": ["Info"]}, {"body": [{"indent": 8, "type": "para", "text": ["Tries to build a bounding box using the information stored in the header of the file."]}], "indent": 4, "type": "dt", "text": ["Info Bounding Box"]}, {"body": [{"indent": 8, "type": "para", "text": ["Tries to load just the points from a disk file.  This will be faster and use less memory than loading primitives."]}], "indent": 4, "type": "dt", "text": ["Point Cloud"]}, {"body": [{"indent": 8, "type": "para", "text": ["Instead of loading the geometry into memory, create a packed disk primitive.  Copies of the delayed load primitive will share geometry meaning that multiple copies will use less memory."]}], "indent": 4, "type": "dt", "text": ["Packed Disk Primitive"]}, {"body": [{"indent": 8, "type": "para", "text": ["Instead of loading the geometry into memory, this will create a packed disk sequence primitive.  Unlike a packed disk primitive, the packed disk sequence stores a list of filenames along with an index of which file to unpack during rendering.  Since the packed disk sequence primitive is aware of all the files in the disk sequence, it is able to compute blended sub-frame geometry at render time (provided topology matches between frames).  This means that motion blur can be computed correctly. When creating the packed disk sequence primitive, the ", {"text": ["Geometry File"], "type": "code"}, " parameter is evaluated for each frame in the frame range.  The index of the packed disk sequence primitive is set to the value of the ", {"text": ["Sequence Index"], "type": "code"}, " parameter."]}], "indent": 4, "type": "dt", "text": ["Packed Disk Sequence"]}], "container": true, "type": "dt_group"}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Load"]}, {"body": [{"indent": 4, "type": "para", "text": ["When loading the geometry as ", {"text": ["Packed Disk Primitive"], "type": "ui"}, ", this toggle controls whether the file name stored with the primitive will have variables expanded.  By default, variables will be preserved. For example, a file such as ", {"text": ["$HIP/geo/tree.bgeo"], "type": "code"}, " will be portable if the value of the ", {"text": ["$HIP"], "type": "code"}, " variable changes.  This is only important if you are saving the packed primitive to disk and may move the geometry file."]}, {"indent": 4, "type": "para", "text": ["When storing variables in the packed primitive (i.e. the toggle is turned off), the primitive itself performs variable expansion.  Since the primitive can be accessed in applications other than Houdini (", {"text": ["mantra"], "type": "code"}, ", ", {"text": ["gplay"], "type": "code"}, ", ", {"text": ["gconvert"], "type": "code"}, ", etc.), the expansion of variables is limited in function.  For example, using variables local to the .hip file or using expressions which reference other nodes may not work as expected."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Pack Using Expanded/Absolute File Path"]}, {"body": [{"indent": 4, "type": "para", "text": ["When loading the geometry as ", {"text": ["Packed Disk Primitive"], "type": "ui"}, " or when delayed loading, you can set the viewport display to a lighter representation of the packed geometry.  This setting only applies to rendering in the viewport, at render time, the full geometry will be rendered."]}, {"body": [{"body": [{"indent": 8, "type": "para", "text": ["Packed primitives have viewport display settings that are saved to file. This option reads these and uses them. All others override the saved setting. "]}], "indent": 4, "type": "dt", "text": ["Use File Setting"]}, {"body": [{"indent": 8, "type": "para", "text": ["The full geometry will be displayed in the viewport."]}], "indent": 4, "type": "dt", "text": ["Full Geometry"]}, {"body": [{"indent": 8, "type": "para", "text": ["Only the points of the geometry will be displayed.  This will take less memory and be faster to render."]}], "indent": 4, "type": "dt", "text": ["Point Cloud"]}, {"body": [{"indent": 8, "type": "para", "text": ["Only display the bounding box of the geometry in the viewport."]}], "indent": 4, "type": "dt", "text": ["Bounding Box"]}, {"body": [{"indent": 8, "type": "para", "text": ["Display a single point at the center of the bounding box."]}], "indent": 4, "type": "dt", "text": ["Centroid"]}, {"body": [{"indent": 8, "type": "para", "text": ["Don\u2019t display the geometry in the viewport."]}], "indent": 4, "type": "dt", "text": ["Hidden"]}], "container": true, "type": "dt_group"}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Display As"]}, {"body": [{"indent": 4, "type": "para", "text": ["If this parameter is set, packed primitives and other shared data will not be loaded immediately but will be loaded only as needed. This can be useful when opening a large scene to reduce load times.  "]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Delay Load Geometry"]}, {"body": [{"indent": 4, "type": "para", "text": ["Create intermediate parent directories for output files as needed."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Create Intermediate Directories"]}, {"body": [{"indent": 4, "type": "para", "text": ["The total number of frames to cache in memory.  These sorted by filename,\n    not by time, so if multiple frames evaluate to the same file name they will\n    share the same cached geometry.  "]}, {"body": [{"body": [{"indent": 8, "type": "para", "text": ["A value of 1 is almost the same as the default behavior of the File SOP.  However, the new geometry will be loaded before the old geometry is freed.  When loading agent primitives, this avoids possible flushing shared agent shape caches."]}], "indent": 4, "role": "item", "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Cache Frames"]}, {"body": [{"indent": 4, "type": "para", "text": ["Attempt to predict the next frame that will be needed and load it in\n    the background.  This lets computation be overlapped with file IO."]}, {"indent": 4, "type": "para", "text": ["If you are blending multiple frames, the Cache Frames needs to be large\n    enough for only the net-new frame to be loaded each cook.  Otherwise\n    the simple predictive model of the prefetcher will be confused and\n    stop working."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Pre-fetch Geometry"]}, {"body": [{"indent": 4, "type": "para", "text": ["When creating Packed Disk Sequence primitives, this parameter specifies the number of filenames in the disk sequence.  When evaluating the ", {"text": ["Geometry File"], "type": "code"}, ", the ", {"text": ["$F"], "type": "code"}, ", and ", {"text": ["$FF"], "type": "code"}, " variables will be set to the values in the frame range."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Frame Range"]}, {"body": [{"indent": 4, "type": "para", "text": ["When creating Packed Disk Sequence primitives, this parameter specifies which geometry from the sequence will be used at render time.  The index is linear, with values between 0 and the number of geometry files in the disk sequence (not based on the frame number).  Index values out of range will automatically wrap to generate animation cycles."]}, {"indent": 4, "type": "para", "text": ["The index values can have non-integer values.  If the topology matches between disk files, the geometry will be blended at render time.  See also the ", {"text": ["vm_pack_sequencesubsteps"], "type": "code"}, " rendering property."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Sequence Index"]}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "text": ["To offset a sequence of images or geo files when you have padding in your frames, you should enter something like this:"]}, {"lang": null, "indent": 4, "type": "pre", "text": ["    \n    <path_to_image>/frame`padzero(3, $F+1)`.tga\n    "]}, {"indent": 4, "type": "para", "text": ["Where 3 is the number of digits in your sequence, for example 001 is pad 3, 0002 pad 4, etc. The back ticks are necessary so the expression gets evaluated inside the string parameter."]}], "indent": 0, "role": "item", "type": "tip"}], "container": true, "role": "item_group", "type": "tip_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "container": true, "type": "parameters_section", "id": "parameters"}], "summary": ["Reads, writes, or caches geometry on disk."], "type": "root", "attrs": {"version": null, "tags": "io", "namespace": null, "internal": "file", "context": "sop", "type": "node", "icon": "COMMON/file"}, "title": ["File"]}