{"body": [{"indent": 0, "text": ["Dop Import"], "type": "title", "level": 0}, {"indent": 0, "type": "summary", "text": ["Imports and transforms geometry based on information extracted from a\nDOP simulation."]}, {"indent": 0, "type": "para", "text": ["The DOP Import SOP imports geometry from a DOP network, and can also transform\nthe input geometry based on the transforms of the DOP objects. The\n", {"text": ["Import Style"], "type": "ui"}, " parameter can be used to select between several modes of\noperation."]}, {"indent": 0, "type": "para", "text": ["DOP objects have two distinct transforms associated with them. One comes\nfrom the Position data attached to the object. The other comes from the\nGeometry data on the object, which has an inherent transform associated\nwith it. This SOP can apply either, both, or neither of these two\ntransforms. It can also apply the inverse transform to effectively undo\nthe transform operation of another Dop Import SOP."]}, {"indent": 0, "type": "para", "text": ["The Dop Import SOP also allows the transformation of selected vector\nattributes for points and primitives."]}, {"body": [{"indent": 0, "type": "para", "text": ["In addition to transforming the geometry, this SOP can create a\nvelocity point attribute on the geometry."]}, {"indent": 0, "type": "para", "text": ["This velocity is calculated by combining any velocity attribute on\nthe geometry in the DOP simulation (such as those set by the Cloth\nSolver) and the overall object velocity and angular velocity stored\nin the object\u2019s Position data. This SOP can calculate an instantaneous\nvelocity for each point by combining the linear and angular velocities of\nthe object, or it can integrate the two velocities over some timestep.\nThe instantaneous velocity approach is a true representation of the\nvelocity of each point, but if the object has a high angular velocity\nthen rendering with these instantaneous velocities may make the object\nappear to be exploding in the render. In this case, integrated\nvelocities can be used to ensure the extrapolated points stay \"inside\"\nthe object\u2019s geometry. The Integrate Over Time parameter specifies the\nintegration interval and should be set to match your timestep, or the\nduration of each geometry segment when using multi-segment motion blur."]}, {"indent": 0, "type": "para", "text": ["If a vectorfield called \"vel\" is present on the object, it is\ninterpreted as a velocity field and added to the computed\nvelocity."]}, {"indent": 0, "type": "para", "text": ["The velocity attribute of the simulation object\u2019s Geometry is\ntransferred to the input geometry using a technique similar to the\nAttribute Transfer SOP. It is not necessary to have the input\ngeometry match the simulation object\u2019s Geometry to get good point\nvelocities. This option is useful for rendering simulation objects\nwith motion blur."]}, {"indent": 0, "type": "para", "text": ["When importing DOP Objects as points, this option is disabled. The\nDOP Object overall velocity is always assigned to the point representing\nthat object."]}], "indent": 0, "level": 2, "text": ["Point velocities"], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "text": ["The DOP Network to extract the transform and velocity\n    information from."]}], "indent": 0, "text": ["DOP Network"], "role": "item", "attrs": {"id": "doppath"}, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "text": ["Specifies the objects within the DOP Network to extract the\n    transforms from."]}], "indent": 0, "text": ["Object Mask"], "role": "item", "attrs": {"id": "objpattern"}, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "text": ["Turning on this option causes the entire input geometry to be\n    transformed by the first simulation object matched by the ", {"text": ["Object\n    Mask"], "type": "ui"}, " parameter. If this option is off, then for each object in\n    the Object Mask, this SOP looks for a primitive group with the\n    same name as the object. Only that primitive group is affected\n    by the object it matches. This means some geometry may not be\n    transformed at all if it does not belong to a matching primitive\n    group."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Use Single Object"]}, {"body": [{"indent": 4, "type": "para", "text": ["Controls the mode of operation for this SOP."]}, {"body": [{"body": [{"indent": 8, "type": "para", "text": ["Pulls geometry from the SOP node connected to its input, and\n        transforms that geometry using the objects fetched from the DOP\n        network. The ", {"text": ["Object Names"], "type": "ui"}, " are used to identify primitives\n        belonging to each object."]}], "indent": 4, "type": "dt", "text": ["Transform Input Geometry"]}, {"body": [{"indent": 8, "type": "para", "text": ["Pulls geometry from the DOP Network, ignoring any SOP that may be\n        connected to its input. This is similar to the functionality\n        provided by the Object Merge SOP, but geared towards DOP Networks.\n        This node provides better control over how the geometry is\n        transformed, and provides parameters that are easier to use for\n        this purpose."]}], "indent": 4, "type": "dt", "text": ["Fetch Geometry from DOP Network"]}, {"body": [{"indent": 8, "type": "para", "text": ["Creates a packed primitive for each object being fetched from the\n        DOP network. For an ", {"text": ["RBD Packed Object"], "fullpath": "/nodes/dop/rbdpackedobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/rbdpackedobject"}, ",\n        the object\u2019s packed primitives will be directly returned.\n        Otherwise, the object\u2019s geometry will be packed into an embedded\n        packed primitive."]}], "indent": 4, "type": "dt", "text": ["Fetch Packed Geometry from DOP Network"]}, {"body": [{"indent": 8, "type": "para", "text": ["Pulls geometry from the DOP Network, ignoring any SOP that may be\n        connected to its input. For an ", {"text": ["RBD Packed Object"], "fullpath": "/nodes/dop/rbdpackedobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/rbdpackedobject"}, ",\n        the unpacked collision geometry will be returned."]}], "indent": 4, "type": "dt", "text": ["Fetch Unpacked Geometry from DOP Network"]}, {"body": [{"indent": 8, "type": "para", "text": ["Creates copies of primitive groups from the SOP connected to its\n        input. This mode is similar to ", {"text": ["Transform Input Geometry"], "type": "ui"}, ", except\n        it can be used when there are several DOP Objects with the same\n        name, all of which want to generate a separate copy of the input\n        primitive group of the same name. This option is also useful if the\n        input SOP contains geometry that is not part of any primitive\n        group, and so does not correspond to any DOP Object."]}], "indent": 4, "type": "dt", "text": ["Stamp Input Geometry"]}, {"body": [{"indent": 8, "type": "para", "text": ["Creates one point per object, and sets attributes on that point to\n        represent the position, orientation, velocity, and geometry for\n        that object. This allows for very light weight geometry to be\n        generated from a DOP Network, which can then use point instancing\n        at render time."]}], "indent": 4, "type": "dt", "text": ["Create Points to Represent Objects"]}], "container": true, "type": "dt_group"}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Import Style"]}, {"body": [{"indent": 4, "type": "para", "text": ["Specifies how to initialize the offset for the point referenced by the\n    packed primitive."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Pivot Location"]}, {"body": [{"indent": 4, "type": "para", "text": ["The viewport LOD for the packed primitives when ", {"text": ["Import Style"], "type": "ui"}, " is\n    ", {"text": ["Fetch Packed Geometry from DOP Network"], "type": "ui"}, "."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Display As"]}, {"body": [{"indent": 4, "type": "para", "text": ["Use the name attribute instead of primitive groups to identify\n    primitives belonging to each DOP Object."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Import By Name"]}, {"body": [{"indent": 4, "type": "para", "text": ["Specifies the format of the name used to identify each DOP object.\n    These names are used by the ", {"text": ["Transform Input Geometry"], "type": "ui"}, " mode and when\n    creating primitive groups or a ", {"text": ["name"], "type": "code"}, " primitive attribute on the\n    imported geometry."]}, {"body": [{"body": [{"indent": 8, "type": "para", "text": ["The DOP Object name is used to identify the object. For an ", {"text": ["RBD\n        Packed Object"], "fullpath": "/nodes/dop/rbdpackedobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/rbdpackedobject"}, ", the value of the ", {"text": ["name"], "type": "code"}, "\n        point attribute is used."]}], "indent": 4, "type": "dt", "text": ["Use DOP Object Name"]}, {"body": [{"indent": 8, "type": "para", "text": ["Generates a name based on the numeric identifier of the source DOP\n        object. You may want to use this setting if there is some chance\n        that multiple DOP Objects with the same name may be imported from\n        the DOP network."]}], "indent": 4, "type": "dt", "text": ["Use DOP Object Id"]}, {"body": [{"indent": 8, "type": "para", "text": ["For an ", {"text": ["RBD Packed Object"], "fullpath": "/nodes/dop/rbdpackedobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/rbdpackedobject"}, ", the DOP Object\n        name is combined with the value of the ", {"text": ["name"], "type": "code"}, " point attribute to\n        produce an identifier such as ", {"text": ["object2/piece3"], "type": "code"}, ". You may want to use\n        this setting if there is some chance that multiple ", {"text": ["RBD Packed\n        Objects"], "fullpath": "/nodes/dop/rbdpackedobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/rbdpackedobject"}, " may contain packed primitives\n        with the same names."]}], "indent": 4, "type": "dt", "text": ["Use Full Path to Object"]}], "container": true, "type": "dt_group"}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Object Names"]}, {"body": [{"indent": 4, "type": "para", "text": ["The subdata path for the geometry to import from the DOP\n    Network. The same data path will be used for all source objects.\n    If left blank, the primary geometry data for the object is used."]}], "indent": 0, "text": ["Geometry Data Path"], "role": "item", "attrs": {"id": "geodatapath"}, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "text": ["Applies the inverse of the transform calculated for the\n    simulation object."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Inverse Transform"]}, {"body": [{"indent": 4, "type": "para", "text": ["Finds the Data named Position on the simulation object and\n    extracts its translation and rotation information to transform\n    the geometry."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Transform Geometry With Position Data"]}, {"body": [{"indent": 4, "type": "para", "text": ["Use the transform embedded in the Geometry data attached to the\n    simulation object. This is a transform is usually set when ", {"text": ["Use\n    Object Transform"], "type": "ui"}, " is set on the Geometry Data."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Transform Geometry With Geometry Data"]}, {"body": [{"indent": 4, "type": "para", "text": ["Use the inverse transform of the object containing this SOP.\n    This allows the world space position of the geometry to be\n    independent of the object level transform. This is useful when\n    this SOP is placed inside an object that is used as the source\n    geometry for the simulation object whose transform is being\n    extracted. The object level transform may be used for the\n    initial position of the simulation object, but you may not want\n    it to affect the world space position of the geometry output\n    from this SOP. When the Inverse Operation option is set, this\n    component of the transform is also inverted."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Preserve World Space Positions"]}, {"body": [{"indent": 4, "type": "para", "text": ["When ", {"text": ["Import Style"], "type": "ui"}, " is set to ", {"text": ["Create Points to Represent Objects"], "type": "ui"}, ", use the RBD Object\u2019s pivot as the point center, which will typically place the points at the\n    objects' centers of mass. This will ensure the created points better match the motion of the source simulation."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Center at Pivot"]}, {"body": [{"indent": 4, "type": "para", "text": ["Adds a string primitive attribute ", {"text": ["name"], "type": "code"}, " which contains the name of the\n    object. The format of the name is specified by the ", {"text": ["Object Names"], "type": "ui"}, "\n    parameter."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Add DOP Object Name Attribute"]}, {"body": [{"indent": 4, "type": "para", "text": ["Adds a string primitive attribute ", {"text": ["dopobject"], "type": "code"}, " which contains the\n    path of the DOP Network followed by the DOP object id."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Add DOP Object Path Attribute"]}, {"body": [{"indent": 4, "type": "para", "text": ["Adds an integer primitive attribute ", {"text": ["dopobjectid"], "type": "code"}, " which contains\n    the DOP object id of the sourced object."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Add DOP Object Id Attribute"]}, {"body": [{"indent": 4, "type": "para", "text": ["Adds velocities computed from the DOP Object to any existing velocity attribute values on the geometry. Turning off this option causes the velocity computed from the DOP Object to simply override any existing velocity attribute value."]}, {"body": [{"body": [{"indent": 8, "type": "para", "text": ["When geometry is dynamically fractured, point velocities are added to transfer the velocity to the smaller chunks. If this parameter is turned on, these point velocities will go to your final render. Turn this parameter off to improve motion blur. It is on by default, but is turned off by shelf tools by default."]}], "indent": 4, "role": "item", "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Add to Existing Velocity Attributes"]}, {"body": [{"indent": 4, "type": "para", "text": ["When in transform mode, any primitives that do not have a\n    corresponding DOP Object will be deleted instead of being left untransformed.  This is useful if your solver deletes objects over\n    time."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Delete Abandoned Primitives"]}, {"body": [{"indent": 4, "type": "para", "text": ["Controls whether point velocities will be calculated for the geometry\n    from this SOP, and the method of calculation. The Instantaneous and\n    Integrated velocity calculations are described in the overview."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Point Velocities"]}, {"body": [{"indent": 4, "type": "para", "text": ["The time interval over which velocities are calculated when using the\n    Integrated Point Velocities calculation. This value should be set to\n    a single frame time, or the duration of a single geometry segment when\n    using multi-segment motion blur."]}], "indent": 0, "text": ["Integrate Over Time"], "role": "item", "attrs": {"id": "integrateovertime"}, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "text": ["If the DOP simulation being imported is out of date, the old cached\n    value will be returned rather than trying to simulate.  This avoids\n    recursion problems when viewing a SOP chain being used by a ", {"text": ["SOP Solver"], "fullpath": "/nodes/dop/sopsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/sopsolver"}, "\n    that would store bad geometry in the simulation cache."]}], "indent": 0, "role": "item", "type": "parameters_item", "text": ["Do Not Trigger Simulation"]}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "container": true, "type": "parameters_section", "id": "parameters"}], "summary": ["Imports and transforms geometry based on information extracted from a\nDOP simulation."], "type": "root", "attrs": {"version": null, "tags": "dynamics, io, transfer", "namespace": null, "internal": "dopimport", "context": "sop", "type": "node", "icon": "SOP/dopimport"}, "title": ["Dop Import"]}